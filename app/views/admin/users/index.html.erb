<h1>Admin Users</h1>

<%= render_table do %>
  <%= table_head do %>
    <%= table_header "First Name" %>
    <%= table_header "Last Name" %>
    <%= table_header "Email" %>
    <%= table_header "Role" %>
    <%= table_header "Approval" %>
    <%= table_header "" %>
    <%= table_header "" %>
  <% end %>
  <%= table_body do %>
    <% @users.each do |user| %>
      <%= table_row do %>
        <%= table_column user.first_name %>
        <%= table_column user.last_name %>
        <%= table_column user.email %>
        <%= table_column do %>
          <%= form_for(user, url: admin_user_role_path(user), method: :patch, data: { controller: 'auto-submit' } ) do |f| %>
            <%= f.select :role, ["standard", "admin"], { }, { data: { action: "auto-submit#submit" } } %>
          <% end %>
        <% end %>
        <%= table_column do %>
          <%= form_for(user, url: admin_approve_role_path(user), method: :patch, data: { controller: 'auto-submit' } ) do |f| %>
            <%= f.check_box :approved, data: { action: 'auto-submit#submit' } %>
          <% end %>
        <% end %>
        <%= table_column do %>
          <%= link_to "Edit" %>
        <% end %>
        <%= table_column do %>
          <%= link_to "Delete" %>
        <% end %>
      <% end %>
    <% end %>
  <% end %>
<% end %>
